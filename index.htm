<!DOCTYPE html>
<html>
<head>
    <title>Résolveur Mathématique Exact</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
            border: 1px solid #ddd;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            background: #f9f9f9;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Résolveur d'Équations Linéaires</h1>
    <p>Entrez une équation (format: ax + b = c) :</p>
    <input type="text" id="equation" placeholder="3x + 5 = 20">
    <button onclick="solve()">Résoudre</button>
    <div id="result"></div>

    <script>
        function solve() {
            const equation = document.getElementById("equation").value.trim();
            const resultDiv = document.getElementById("result");
            
            // Réinitialisation
            resultDiv.innerHTML = '';
            
            if (!equation) {
                resultDiv.innerHTML = '<p style="color:red">Veuillez entrer une équation</p>';
                return;
            }

            try {
                // Vérification du format
                if (!equation.match(/^[0-9xX\s+\-*=^.]+$/)) {
                    throw new Error("Caractères non autorisés");
                }

                // Séparation des côtés de l'équation
                const parts = equation.split('=');
                if (parts.length !== 2) throw new Error("Format invalide: utilisez '=' une fois");

                const left = parts[0].trim();
                const right = parts[1].trim();

                // Extraction des coefficients
                const leftParsed = parseSide(left);
                const rightParsed = parseSide(right);

                // Calcul final: ax = c - b → x = (c - b)/a
                const a = leftParsed.a - rightParsed.a;
                const b = rightParsed.b - leftParsed.b;

                if (a === 0) {
                    if (b === 0) {
                        resultDiv.innerHTML = '<p>Solution: <strong>∞ solutions (équation toujours vraie)</strong></p>';
                    } else {
                        resultDiv.innerHTML = '<p>Solution: <strong>Aucune solution (équation impossible)</strong></p>';
                    }
                    return;
                }

                const solution = b / a;
                resultDiv.innerHTML = `<p>Solution: <strong>x = ${solution}</strong></p>`;

            } catch (e) {
                resultDiv.innerHTML = `<p style="color:red">Erreur: ${e.message}<br>
                Format attendu: <strong>ax + b = c</strong><br>
                Exemples valides:<br>
                • 3x + 5 = 20<br>
                • x - 4 = 0<br>
                • 2.5x = 10</p>`;
            }
        }

        function parseSide(side) {
            let a = 0; // coefficient de x
            let b = 0; // terme constant
            
            // Gestion des cas spéciaux
            side = side.replace(/\s+/g, '')
                      .replace(/-/g, '+-')
                      .replace(/^\+/, '');
            
            if (!side) return {a: 0, b: 0};

            const terms = side.split('+');
            
            terms.forEach(term => {
                if (term.includes('x')) {
                    const coeff = term.replace('x', '');
                    a += coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                } else if (term) {
                    b += parseFloat(term);
                }
            });

            return {a, b};
        }
    </script>
</body>
</html>
